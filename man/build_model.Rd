% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model_building.R
\name{build_model}
\alias{build_model}
\title{Build a Single Model Between Two Systems}
\usage{
build_model(
  rt_matrix,
  sys1_id,
  sys2_id,
  n_boot = 200,
  alpha = 0.05,
  n_cores = parallel::detectCores(),
  method = c("fast_ci", "bootstrap"),
  save_plot = FALSE,
  plot_dir = NULL,
  dataset1 = NULL,
  dataset2 = NULL
)
}
\arguments{
\item{rt_matrix}{A 2-column matrix \link{rt_source, rt_target} of common
compound retention times.}

\item{sys1_id}{Source system identifier.}

\item{sys2_id}{Target system identifier.}

\item{n_boot}{Number of bootstrap iterations (default 200). Only used if
method = "bootstrap".}

\item{alpha}{Significance level for PI (default 0.05 for 95\% PI).}

\item{n_cores}{Number of CPU cores for parallel computation.
Default uses all available cores.}

\item{method}{Method for confidence intervals: "fast_ci" (72x faster, default)
or "bootstrap" (accurate, slower).}

\item{save_plot}{Logical, whether to save an interactive plot (default FALSE).}

\item{plot_dir}{Directory to save plot HTML files (required if save_plot = TRUE).}

\item{dataset1}{Optional dataset object for compound names in plots.}

\item{dataset2}{Optional dataset object for compound names in plots.}
}
\value{
A list with model information:
\describe{
\item{status}{"success" or "insufficient_data"}
\item{sys1_id}{Source system ID}
\item{sys2_id}{Target system ID}
\item{n_points}{Number of calibration compounds}
\item{newdata}{Vector of x-values for prediction grid (1000 points)}
\item{ci}{Matrix \link{pred, lower, upper} at newdata points}
\item{calibration}{Original RT matrix used for training}
\item{compounds}{InChI strings of calibration compounds}
\item{build_time}{Timestamp when model was built}
\item{stats}{Error statistics (mean, median, q95, max error and CI width)}
\item{method}{Method used for PI calculation}
\item{plot_path}{Path to saved plot HTML (if save_plot = TRUE)}
}
}
\description{
Builds a monotonically constrained GAM model to predict retention times
from one chromatographic system to another.
}
